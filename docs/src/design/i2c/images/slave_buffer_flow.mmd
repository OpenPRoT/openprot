sequenceDiagram
    participant Controller as Controller<br/>(external)
    participant HW as Hardware<br/>(I2C periph)
    participant Driver as Driver<br/>(i2c server)
    participant Client as Client<br/>(app task)
    
    Controller->>HW: Write[Msg1]
    HW->>Driver: IRQ
    Note over Driver: read_target_data()<br/>Store Msg1
    Driver->>Client: sys_post()
    Note over Client: (wakes up)
    Client->>Driver: get_target_message()
    Driver-->>Client: Returns Msg1
    Note over Client: (processing Msg1)
    
    Controller->>HW: Write[Msg2]
    HW->>Driver: IRQ
    Note over Driver: read_target_data()<br/>Store Msg2
    Driver->>Client: sys_post()