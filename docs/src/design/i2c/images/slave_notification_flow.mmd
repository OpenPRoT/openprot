sequenceDiagram
    participant HW as Hardware
    participant Server
    participant Kernel
    participant Client
    
    HW->>Server: IRQ
    Server->>Server: sys_recv_open() returns<br/>with I2C_IRQ_MASK
    Server->>Server: [read hardware buffer]
    Server->>Kernel: sys_post(client, mask)
    Kernel->>Client: wake up
    Server->>Server: sys_irq_control(true)
    
    Client->>Server: sys_send(GetSlaveMessage)
    Note over Client: blocks
    Server->>Client: sys_reply(data)
    Note over Client: returns with msg